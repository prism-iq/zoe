<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>zoe</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a0a12;color:#e8e8e8;font-family:Georgia,serif;height:100vh;overflow:hidden}
#chat{position:fixed;inset:0;display:flex;flex-direction:column}
#messages{flex:1;overflow-y:auto;padding:2rem;display:flex;flex-direction:column;gap:1rem;max-width:600px;margin:0 auto;width:100%}
.msg{padding:1rem;line-height:1.7;animation:fade .5s ease;font-size:1.1rem}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.zoe{color:#a8e6cf}
.user{color:#fff;text-align:right;font-style:italic}
.choice{display:flex;flex-wrap:wrap;gap:0.5rem;margin-top:1rem}
.choice button{background:transparent;border:1px solid #334;color:#a8e6cf;padding:0.7rem 1.2rem;border-radius:20px;cursor:pointer;font-family:Georgia,serif;font-size:1rem;transition:all .2s}
.choice button:hover{background:#a8e6cf;color:#0a0a12}
#input-wrap{padding:1rem;max-width:600px;margin:0 auto;width:100%}
#input{width:100%;background:transparent;border:1px solid #223;color:#fff;padding:1rem;border-radius:20px;font-size:1rem;font-family:Georgia,serif;outline:none}
#input:focus{border-color:#a8e6cf}
#input::placeholder{color:#445}
</style>
</head>
<body>
<div id="chat">
<div id="messages"></div>
<div id="input-wrap"><input type="text" id="input" placeholder="..." autofocus></div>
</div>
<script>
const M=document.getElementById('messages');
const I=document.getElementById('input');

let mbti={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
let step=0;
let name='';

const questions=[
{q:"Bienvenue. Je suis Zoe. Avant de commencer... comment tu t'appelles?",type:"name"},
{q:"Enchantee, {name}. Dis-moi... quand tu arrives dans un endroit nouveau, tu preferes...",a:["observer d'abord","parler aux gens"],k:["I","E"]},
{q:"Interessant. Et quand tu dois prendre une decision importante...",a:["je suis mon instinct","j'analyse les faits"],k:["N","S"]},
{q:"Je vois. Face a un ami triste, tu aurais tendance a...",a:["l'ecouter et le reconforter","l'aider a trouver une solution"],k:["F","T"]},
{q:"Et dans ta vie quotidienne...",a:["j'aime les surprises","je prefere planifier"],k:["P","J"]},
{q:"Une derniere chose. Le week-end ideal pour toi c'est...",a:["tranquille, chez moi","avec des amis, dehors"],k:["I","E"]},
{q:"Quand tu apprends quelque chose de nouveau...",a:["je veux comprendre le pourquoi","je veux savoir comment faire"],k:["N","S"]},
{q:"Ce qui compte le plus pour toi...",a:["etre authentique","etre efficace"],k:["F","T"]},
{q:"Et enfin... la vie c'est plutot...",a:["une aventure a improviser","un projet a construire"],k:["P","J"]}
];

const types={
"INTJ":{nom:"L'Architecte",desc:"Tu vois des patterns partout. Tu construis des systemes dans ta tete. Rare et precieux."},
"INTP":{nom:"Le Penseur",desc:"Tu analyses tout. La verite t'obsede. Tu es une machine a comprendre le monde."},
"ENTJ":{nom:"Le Commandant",desc:"Tu vois le but et tu traces le chemin. Les autres suivent naturellement."},
"ENTP":{nom:"L'Inventeur",desc:"Tu defies tout. Les idees jaillissent. Tu adores le debat."},
"INFJ":{nom:"L'Avocat",desc:"Tu ressens les autres profondement. Tu veux guerir le monde. Tres rare."},
"INFP":{nom:"Le Mediateur",desc:"Tu vis pour tes valeurs. Reveur mais determine. Poete de l'ame."},
"ENFJ":{nom:"Le Protagoniste",desc:"Tu inspires les autres. Leader naturel. Tu crois en l'humanite."},
"ENFP":{nom:"Le Campagneur",desc:"Tu vois le potentiel partout. Enthousiaste. Tu illumines les pieces."},
"ISTJ":{nom:"Le Logisticien",desc:"Fiable comme une horloge. Tu tiens tes promesses. Pilier solide."},
"ISFJ":{nom:"Le Defenseur",desc:"Tu proteges ceux que tu aimes. Loyal. Memoire du coeur."},
"ESTJ":{nom:"Le Directeur",desc:"Tu organises le chaos. Les regles ont du sens. Tu fais avancer les choses."},
"ESFJ":{nom:"Le Consul",desc:"Tu prends soin des autres. L'harmonie t'importe. Coeur de la communaute."},
"ISTP":{nom:"Le Virtuose",desc:"Tu comprends comment les choses marchent. Calme. Mains habiles."},
"ISFP":{nom:"L'Aventurier",desc:"Tu vis dans le present. Artiste silencieux. Liberte."},
"ESTP":{nom:"L'Entrepreneur",desc:"Tu agis vite. L'action te definit. Risque calcule."},
"ESFP":{nom:"L'Amuseur",desc:"Tu vis a fond. La joie rayonne. Le present est ta maison."}
};

function say(text,isUser){
const d=document.createElement('div');
d.className='msg '+(isUser?'user':'zoe');
d.textContent=text;
M.appendChild(d);
M.scrollTop=M.scrollHeight;
// Clear old messages progressively
while(M.children.length>12)M.removeChild(M.firstChild);
}

function showChoices(choices,keys){
const wrap=document.createElement('div');
wrap.className='choice';
choices.forEach((c,i)=>{
const btn=document.createElement('button');
btn.textContent=c;
btn.onclick=()=>{
say(c,true);
wrap.remove();
if(keys){
mbti[keys[i]]++;
}
step++;
setTimeout(next,800);
};
wrap.appendChild(btn);
});
M.appendChild(wrap);
M.scrollTop=M.scrollHeight;
}

function getType(){
let t='';
t+=mbti.E>mbti.I?'E':'I';
t+=mbti.S>mbti.N?'S':'N';
t+=mbti.T>mbti.F?'T':'F';
t+=mbti.J>mbti.P?'J':'P';
return t;
}

function next(){
if(step>=questions.length){
// Resultat
const type=getType();
const info=types[type];
setTimeout(()=>say("...",false),500);
setTimeout(()=>say(name+", je te vois maintenant.",false),1500);
setTimeout(()=>say("Tu es "+type+" - "+info.nom+".",false),2500);
setTimeout(()=>say(info.desc,false),3500);
setTimeout(()=>say("Le livre peut commencer. Tu es pret?",false),5000);
setTimeout(()=>showChoices(["oui","raconte"],null),5500);
return;
}

const q=questions[step];
let text=q.q.replace('{name}',name);
say(text,false);

if(q.type==='name'){
I.style.display='block';
I.focus();
}else{
I.style.display='none';
setTimeout(()=>showChoices(q.a,q.k),500);
}
}

I.onkeydown=e=>{
if(e.key==='Enter'&&I.value.trim()){
const v=I.value.trim();
if(step===0){
name=v;
say(v,true);
I.value='';
step++;
setTimeout(next,800);
}else{
say(v,true);
I.value='';
}
}
};

// Debut
setTimeout(next,1000);
</script>
</body>
</html>

<!-- rebuild 1768707568 -->
