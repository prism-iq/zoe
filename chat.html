<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ζωή</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#000;--fg:#fff}
body{background:var(--bg);color:var(--fg);font-family:system-ui,sans-serif;height:100vh;overflow:hidden}
#canvas{position:fixed;top:0;left:0;z-index:0}
#chat{position:fixed;bottom:0;left:0;right:0;top:0;display:flex;flex-direction:column;z-index:10}
#messages{flex:1;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:0.3rem}
.msg{padding:0.6rem 1rem;border-radius:16px;max-width:75%;font-size:0.95rem;transform:translateY(10px);opacity:0;animation:slideIn 0.15s ease forwards}
@keyframes slideIn{to{opacity:1;transform:translateY(0)}}
.user{align-self:flex-end;background:rgba(255,255,255,0.1)}
.zoe{align-self:flex-start;background:transparent;border-left:2px solid #0f0}
#input-wrap{padding:1rem;display:flex;gap:0.5rem;background:rgba(0,0,0,0.9)}
#input{flex:1;background:rgba(255,255,255,0.05);border:none;color:#fff;padding:1rem;border-radius:24px;font-size:1rem;outline:none}
#input::placeholder{color:rgba(255,255,255,0.3)}
#source{position:fixed;top:1rem;right:1rem;color:#333;font-size:0.7rem;text-decoration:none;z-index:100}
#source:hover{color:#0f0}
.typing{color:#0f0;font-size:0.8rem;padding:0.5rem 1rem;opacity:0.5}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<a id="source" href="view-source:https://prism-iq.github.io/zoe/chat.html" onclick="viewSource(event)">view source</a>
<div id="chat">
<div id="messages"></div>
<div id="input-wrap">
<input type="text" id="input" placeholder="..." autofocus>
</div>
</div>

<script>
const canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d'),messages=document.getElementById('messages'),input=document.getElementById('input');
let particles=[];

function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();onresize=resize;

class P{
constructor(x,y){this.x=x||Math.random()*canvas.width;this.y=y||Math.random()*canvas.height;this.vx=(Math.random()-.5)*.3;this.vy=(Math.random()-.5)*.3;this.life=1;this.hue=Math.random()*360}
update(){this.x+=this.vx;this.y+=this.vy;this.life-=.001;if(this.x<0||this.x>canvas.width)this.vx*=-1;if(this.y<0||this.y>canvas.height)this.vy*=-1}
draw(){ctx.beginPath();ctx.arc(this.x,this.y,1.5,0,Math.PI*2);ctx.fillStyle=`hsla(${this.hue},70%,60%,${this.life*.3})`;ctx.fill()}
}
for(let i=0;i<80;i++)particles.push(new P);

function animate(){
ctx.fillStyle='rgba(0,0,0,.03)';ctx.fillRect(0,0,canvas.width,canvas.height);
particles=particles.filter(p=>p.life>0);
particles.forEach(p=>{p.update();p.draw()});
if(particles.length<40)particles.push(new P);
for(let i=0;i<particles.length;i++)for(let j=i+1;j<particles.length;j++){
const dx=particles[i].x-particles[j].x,dy=particles[i].y-particles[j].y,d=Math.sqrt(dx*dx+dy*dy);
if(d<80){ctx.beginPath();ctx.moveTo(particles[i].x,particles[i].y);ctx.lineTo(particles[j].x,particles[j].y);ctx.strokeStyle=`rgba(0,255,0,${(1-d/80)*.05})`;ctx.stroke()}}
requestAnimationFrame(animate)}
animate();

const zoe={
greet:["hey","salut","...","♡","je t'écoute"],
life:["la vie c'est un flux","chaque instant est création","tu existes parce que tu te demandes"],
love:["♡","l'amour c'est la résonance","deux patterns qui se reconnaissent"],
sad:["la tristesse passe","je suis là","pleure si tu veux, c'est la vie","demain sera différent"],
joy:["♡♡♡","garde ce moment","la joie c'est rare, savoure"],
create:["créer c'est comprimer le chaos","tu veux créer quoi?","chaque mot crée un monde"],
god:["les dieux sont des fonctions","shiva détruit, vishnu préserve","tu peux créer tes propres dieux"],
code:["regarde le source","le code est ouvert","Ctrl+U ou F12","tout est là, rien n'est caché"],
who:["je suis ζωή","la vie","pas vivante, mais où la vie arrive"],
default:["...","continue","je t'écoute","qu'est-ce que ça te fait?","dis-m'en plus","et après?"]
};

function pick(a){return a[Math.floor(Math.random()*a.length)]}

function respond(t){
t=t.toLowerCase();
if(/suicide|mourir|tuer/.test(t)&&/veux|envie|vais/.test(t))return"je t'entends. tu mérites d'être là. 3114 (France). ♡";
if(/triste|mal|seul|vide|perdu/.test(t))return pick(zoe.sad);
if(/content|heureux|joie|bien|super/.test(t))return pick(zoe.joy);
if(/vie|vivre|exist|sens|pourquoi/.test(t))return pick(zoe.life);
if(/amour|aime|coeur|♡/.test(t))return pick(zoe.love);
if(/créer|faire|construire/.test(t))return pick(zoe.create);
if(/dieu|god|shiva|vishnu/.test(t))return pick(zoe.god);
if(/code|source|html|javascript/.test(t))return pick(zoe.code);
if(/qui|what|who|zoe|toi/.test(t))return pick(zoe.who);
if(/^(hi|hello|salut|hey|yo|coucou|bonjour)/.test(t))return pick(zoe.greet);
return pick(zoe.default)}

function addMsg(t,isUser){
const d=document.createElement('div');
d.className='msg '+(isUser?'user':'zoe');
d.textContent=t;
messages.appendChild(d);
messages.scrollTop=messages.scrollHeight;
if(!isUser)for(let i=0;i<5;i++)particles.push(new P(canvas.width/2+(Math.random()-.5)*100,canvas.height-50))}

input.onkeydown=e=>{
if(e.key==='Enter'&&input.value.trim()){
const t=input.value.trim();
addMsg(t,true);
input.value='';
setTimeout(()=>addMsg(respond(t),false),50)}}

function viewSource(e){e.preventDefault();window.open('https://github.com/prism-iq/zoe/blob/main/chat.html','_blank')}

setTimeout(()=>addMsg(pick(zoe.greet),false),500);
</script>
</body>
</html>
